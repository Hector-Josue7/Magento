<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="../public/css/bootstrap.min.css">
<!--<script src="js/jquery-3.3.1.min.js"></script>-->
<script src="../public/js/jquery-3.3.1.min.js"></script>
    <style type="text/css" media="screen">
     div.editor { 
            position: relative;
            top: 0px;
            right: 0;
            bottom: 0;
            left: 0;
            width:auto;
           height: 330px;
           }
   #result{
     border:none;
     width:100%;
    height:220px;}
     </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Link</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Dropdown
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#">Disabled</a>
        </li>
      </ul>
      <form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
  </nav>

    <div class="container-fluid">
        <div class="row">
          <div id="editorHTML" class="col-xl-4 col-lg-4 col-md-4 col-4 col-sm-4  editor">
           
          </div>
          <div id="editorCSS" class="col-xl-4 col-lg-4 col-md-4 col-4 col-sm-4 editor"></div>
          <div id="editorJavaScript" class="col-xl-4 col-lg-4 col-md-4 col-4 col-sm-4 editor" ></div>
       </div>
        <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 col-12 col-sm-12" >
                <iframe  id="result" ></iframe>
            </div>
        </div>
</div>

 <script src="../public/js/bootstrap.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.3.1/ace.js" type="text/javascript"></script>
     <script src="../public/js/html.js"></script>
     <script  src = "../public/js/ace.js"  type = "text/javascript "  charset = " utf-8" > </script>
      <script src="../public/js/css.js"></script>
     <script src="../public/js/mode-html.js" type="text/javascript" charset="utf-8"></script>
       <script src="../public/js/mode-css.js" type="text/javascript" charset="utf-8"></script>
       
        <script src="js/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="js/ext-language_tools.js"></script>
       <script type="text/javascript">
/*
    var editorHTML = ace("editorHTML");
    editorHTML.setTheme("ace/theme/monokai");
    editorHTML.session.setMode("ace/mode/html");

    var editorCSS = ace.edit("editorCSS");
    editorCSS.setTheme("ace/theme/monokai");
    editorCSS.session.setMode("ace/mode/css");
*/

/*EDITOR HTML*/
var eh = ace.edit("editorHTML",{
 selectionStyle: "text",
 value: `<html>
  <head>
    <title>titulo del sitio web</title>
  </head>
  <body>
  <h1>Hola mundo</h1>
  <ul>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ul>

<p><button onclick="myMove()">Click Me</button></p> 

<div id ="container">
  <div id ="animate"></div>
</div>

   </body>
 </html>`
  })
 eh.setTheme("ace/theme/monokai");
eh.session.setMode("ace/mode/html");
eh.setOptions({
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true,
        enableBasicAutocompletion: true,
        autoScrollEditorIntoView: true,
    });

/*EDITOR CSS*/
var ec = ace.edit("editorCSS", {
  selectionStyle: "text",
  value:`#container { 
  width: 400px;
   height: 400px;
   position: relative;
   background: yellow;
 }
 #animate {
   width: 50px;
   height: 50px;
   position: absolute;
   background-color: red;
 }
 body{
  background: #43cea2;  /* fallback for old browsers */
background: -webkit-linear-gradient(to bottom, #185a9d, #43cea2);  /* Chrome 10-25, Safari 5.1-6 */
background: linear-gradient(to bottom, #185a9d, #43cea2); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */

  
 }
  
  `
});
ec.setTheme("ace/theme/monokai");
ec.session.setMode("ace/mode/css");

ec.setOptions({
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true,
        enableBasicAutocompletion: true
     //   autoScrollEditorIntoView: true 
 });
//    editorCSS.session.setMode("ace/mode/css");

/*EDITOR JAVASCRIPT*/
    var ej = ace.edit("editorJavaScript",{
 selectionStyle: "text",
 value: `
 function myMove() {
  var elem = document.getElementById("animate");   
  var pos = 0;
  var id = setInterval(frame, 5);
  function frame() {
    if (pos == 350) {
      clearInterval(id);
    } else {
      pos++; 
      elem.style.top = pos + "px"; 
      elem.style.left = pos + "px"; 
    }
  }
}
 
 `
  });
    ej.setTheme("ace/theme/monokai");
    ej.session.setMode("ace/mode/javascript");

    ej.setOptions({
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true,
        enableBasicAutocompletion: true,
        autoScrollEditorIntoView: true,
        selectionStyle: "text" 
    });
    
    eh.getSession().on('change', function(){
                    update();
                });

                ec.getSession().on('change', function(){
                    update();
                });

                ej.getSession().on('change', function(){
                    update();
                    //update2();
                });
   /*
       var iframeBody=$('iframe').contents().find('body');
iframeBody.attr('contenteditable', true);

$(iframeBody).on( 'keyup',function() {
    var txt = $(this).html();
    $('div').html(txt);
    
});
*/

function update(){
                var res = document.getElementById("result").contentWindow.document;
                
                res.open();
                res.write(eh.getValue());
                res.write('<style>'+ec.getValue()+'</style>');
                res.close();

              
            };
            function update2(){

document.getElementById("result").contentWindow.eval($("#editorJavaScript").val());

};
            update();
            update2();
      </script>


</body>
</html>